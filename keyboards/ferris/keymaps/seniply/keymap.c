#include QMK_KEYBOARD_H

enum layers {
  COLEMAK_DH,
  EXTENDED_LAYER,
  FUNCTION_LAYER,
  SYMBOLS_LAYER,
  NUMBERS_LAYER
};

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [COLEMAK_DH] = LAYOUT(
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_Q, KC_W, KC_F, KC_P, KC_B,
                                                            KC_J, KC_L, KC_U, KC_Y, KC_QUOT,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_A, LCTL_T(KC_R), LALT_T(KC_S), LGUI_T(KC_T), KC_G,
                                                            KC_M, RGUI_T(KC_N), RALT_T(KC_E), RCTL_T(KC_I), KC_O,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_Z, KC_X, KC_C, KC_D, KC_V,
                                                            KC_K, KC_H, KC_COMM, KC_DOT,  KC_SLSH,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
                              MO(EXTENDED_LAYER),  KC_LSFT,
                                                            MEH_T(KC_SPC), MO(SYMBOLS_LAYER)
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  ),

  [EXTENDED_LAYER] = LAYOUT(
  //-----------------------------?---------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_ESC, LCTL(LSFT(KC_TAB)), KC_NO, LCTL(KC_TAB), KC_B,
                                                            KC_PGUP, KC_HOME, KC_UP, KC_END, KC_CAPS,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_LSFT, KC_LCTL, KC_LALT, KC_LGUI, KC_RALT,
                                                            KC_PGDN, KC_LEFT, KC_DOWN, KC_RIGHT, KC_DEL,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_Z, KC_X, KC_C, KC_D, KC_V,
                                                            KC_ENT, KC_BSPC, KC_TAB, KC_APP,  KC_PSCR,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
                              KC_NO,  KC_NO,
                                                            KC_ENT, MO(FUNCTION_LAYER)
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  ),

  [FUNCTION_LAYER] = LAYOUT(
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_MSTP, KC_MEDIA_PREV_TRACK, KC_MEDIA_PLAY_PAUSE, KC_MEDIA_NEXT_TRACK, KC_BRIGHTNESS_UP,
                                                                                              KC_F12, KC_F7, KC_F8, KC_F9, KC_NO,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_LSFT, KC_LCTL, KC_LALT, KC_LGUI, KC_BRIGHTNESS_DOWN,
                                                                                              KC_F11, KC_F4, KC_F5, KC_F6, KC_NO,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  LCTL(LSFT(KC_C)), KC_MUTE, KC_AUDIO_VOL_DOWN, KC_AUDIO_VOL_UP, LCTL(LSFT(KC_V)),
                                                                                              KC_F10, KC_F1, KC_F2, KC_F3,  KC_NO,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
                              KC_NO,  KC_NO,
                                                                                              KC_ENT, KC_NO
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  ),

  [SYMBOLS_LAYER] = LAYOUT(
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_EXLM, KC_AT, KC_HASH, KC_DLR, KC_PERC,
                                                                                              KC_EQL, KC_GRV, KC_COLN, KC_SCLN, KC_PLUS,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_LSFT, KC_LCTL, KC_LALT, KC_LGUI, KC_CIRC,
                                                                                              KC_ASTR, KC_LPRN, KC_LCBR, KC_LBRC, KC_MINS,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_NO, KC_NO, KC_BSLS, KC_PIPE, KC_AMPR,
                                                                                              KC_TILD, KC_RPRN, KC_RCBR, KC_RBRC,  KC_UNDS,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
          MO(FUNCTION_LAYER),  MO(NUMBERS_LAYER),
                                                                                              KC_NO, KC_NO
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  ),

  [NUMBERS_LAYER] = LAYOUT(
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_NO, KC_NO, KC_NO, KC_DEL, KC_NO,
                                                                                              KC_EQL, KC_7, KC_8, KC_9, KC_PLUS,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_LSFT, KC_LCTL, KC_LALT, KC_LGUI, KC_RALT,
                                                                                              KC_ASTR, KC_4, KC_5, KC_6, KC_MINS,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  KC_NO, KC_APP, KC_TAB, KC_BSPC, KC_ENT,
                                                                                              KC_0, KC_1, KC_2, KC_3,  KC_PSLS,
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
                              KC_NO,  KC_NO,
                                                                                              KC_NO, KC_NO
  //---------------------------------------------------------------------------------------       ----------------------------------------------------------------------------------
  )
};
// clang-format on

enum combos {
  AO_ESC,
  RI_SEMI,
  BJ_BOOT
};

const uint16_t PROGMEM ao_combo[] = {KC_A, KC_O, COMBO_END};
const uint16_t PROGMEM ri_combo[] = {KC_R, KC_I, COMBO_END};
const uint16_t PROGMEM bj_combo[] = {KC_B, KC_J, COMBO_END};

combo_t key_combos[] = {
  [AO_ESC] = COMBO(ao_combo, KC_ESC),
  [RI_SEMI] = COMBO(ri_combo, KC_SCLN),
  [BJ_BOOT] = COMBO(bj_combo, QK_BOOT)
};
